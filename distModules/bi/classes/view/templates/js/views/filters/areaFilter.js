define(["jquery","backbone","mustache","text!templates/filters/areaFilter.html","collections/filters/filters","config/appConfig"],function(a,b,c,d,e,f){var g=b.View.extend({tagName:"div",events:{"click #close":"remove"},render:function(){var a=c.render(d,this.model.toJSON());return this.$el.html(a),this},renderMap:function(){var a=L.tileLayer(f.URL_OPENSTREETMAP,{minZoom:2,maxZoom:18});this.map=L.map("mapFilter",{layers:[a]}),this.map.setView([42.8802049,-8.5447697],2);var b=L.areaSelect({width:50,height:50});b.addTo(this.map);var c=this;b.on("change",function(){var a=L.rectangle(this.getBounds()),b=[];_.each(a._latlngs,function(a){b.push([a.lat,a.lng])});var d={$polygon:b};c.model.set("values",[d])})},remove:function(){var a=this.model.attributes.filterID,b=e.findWhere({filterID:a});e.remove(b),this.$el.remove()}});return g});